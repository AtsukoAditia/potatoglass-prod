(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6de1d7af"],{"43f5":function(t,e,a){"use strict";a("bdc0")},7297:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{attrs:{md:"12",sm:"12"}},[a("iq-card",{scopedSlots:t._u([{key:"headerTitle",fn:function(){},proxy:!0},{key:"body",fn:function(){return[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("label",{attrs:{for:"searchInput"}},[t._v("Pencarian")]),a("b-form-input",{attrs:{id:"searchInput",type:"search",size:"md",placeholder:"Ketik disini untuk mencari..."},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1),a("b-col",{staticClass:"my-1 float-right",attrs:{md:"6"}},[a("label",{attrs:{for:"searchInput"}},[t._v("Filter")]),a("div",{staticClass:"d-block"},[a("b-button",{staticClass:"mr-1",attrs:{variant:"primary"},on:{click:function(e){return t.filterTrans(0)}}},[t._v("Semua")]),a("router-link",{attrs:{to:"/booking-gabungan"}},[a("b-button",{staticClass:"mr-1",attrs:{variant:"success"}},[t._v("Trans. Gabungan")])],1)],1)])],1),a("br"),a("b-table",{ref:"dTable",attrs:{items:t.getTransactionList,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,"show-empty":""},on:{filtered:t.onFiltered},scopedSlots:t._u([{key:"cell(no)",fn:function(e){return[a("span",{attrs:{"v-for":e}},[t._v(" "+t._s((t.currentPage-1)*t.perPage+(e.index+1))+" ")])]}},{key:"cell(total)",fn:function(e){return[0!=e.item.total_payment?a("div",[a("span",{staticClass:"d-block"},[t._v("Rp "+t._s(t.separatorNum(parseFloat(e.item.total-e.item.total_payment))))]),a("small",[a("s",[t._v("Rp "+t._s(t.separatorNum(e.item.total)))])])]):a("div",[t._v(" Rp "+t._s(t.separatorNum(e.item.total))+" ")])]}},{key:"cell(customer)",fn:function(e){return[a("div",[t._v(t._s(e.item.customer))]),a("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"text-muted",attrs:{title:"Perusahaan Pembeli"}},[t._v("- "+t._s(e.item.customer_company))])]}},{key:"cell(list)",fn:function(e){return[t._v(" "+t._s(t.separatorNum(e.item.list.length))+" ")]}},{key:"cell(material)",fn:function(e){return[1==e.item.list.length?a("span",[t._v(" "+t._s(e.item.list[0].material_name)+" ")]):2==e.item.list.length?a("span",[t._v(" "+t._s(e.item.list[0].material_name)+", "+t._s(e.item.list[1].material_name)+" ")]):e.item.list.length>2?a("span",[t._v(" "+t._s(e.item.list[0].material_name)+", "+t._s(e.item.list[1].material_name)+", ... ")]):t._e()]}},{key:"cell(created_at)",fn:function(e){return[t._v(" "+t._s(t._f("moment")(e.item.created_at))+" ")]}},{key:"cell(note)",fn:function(e){return[a("b-button",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:function(a){return t.noteOrder(e.item,e.index,a.target)}}},[t._v(" Lihat ")])]}},{key:"cell(status)",fn:function(e){return[1==e.item.status?a("b-badge",{attrs:{variant:"warning"}},[t._v("Pesanan Masuk")]):t._e(),2==e.item.status?a("b-badge",{attrs:{variant:"info"}},[t._v("DP Telah Diterima")]):t._e(),3==e.item.status?a("b-badge",{attrs:{variant:"primary"}},[t._v("Pesanan diterima Vendor")]):t._e(),4==e.item.status?a("b-badge",{attrs:{variant:"warning"}},[t._v("Pesanan dalam Pengiriman")]):t._e(),9==e.item.status?a("b-badge",{attrs:{variant:"info"}},[t._v("Pesanan Diterima")]):t._e(),10==e.item.status?a("b-badge",{attrs:{variant:"success"}},[t._v("Pesanan Berhasil")]):t._e(),11==e.item.status?a("b-badge",{attrs:{variant:"danger"}},[t._v("Pesanan Ditolak Vendor")]):t._e(),12==e.item.status?a("b-badge",{attrs:{variant:"danger"}},[t._v("Pesanan Dibatalkan User")]):t._e()]}},{key:"cell(actions)",fn:function(t){return[a("router-link",{attrs:{to:{name:"booking.detail",params:{id:t.item.id}}}},[a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.top",value:"Lihat detail pesanan",expression:"'Lihat detail pesanan'",modifiers:{top:!0}}],staticClass:"mr-1",attrs:{size:"sm",variant:"info"}},[a("div",{staticClass:"icon",attrs:{"data-icon":""}})])],1)]}}])}),a("b-col",{staticClass:"my-1",attrs:{sm:"12",md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"fill",size:"sm"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)]},proxy:!0}])})],1)],1),a("b-modal",{attrs:{id:t.infoModal.id,title:t.infoModal.title,"ok-only":""},on:{hide:t.resetNoteOrder}},[a("div",{staticClass:"text-dark",domProps:{innerHTML:t._s(t.infoModal.content)}})])],1)},r=[],i=(a("d81d"),a("4de4"),a("d3b7"),a("ac1f"),a("5319"),a("25f0"),a("bcae")),s=a("b46c"),o=a("c1df"),l=a.n(o),c={name:"BookingAll",props:{toMaterialAdd:{type:Object,default:function(){return{name:"material.addmaterial"}}}},mounted:function(){i["d"].index()},data:function(){return{fields:[{key:"no",label:"No.",sortable:!0,sortDirection:"asc"},{key:"customer",label:"Pembeli"},{key:"total",label:"Total"},{key:"order_at",label:"Pesanan Dibuat"},{key:"status",label:"Status"},{key:"actions",label:"Aksi"}],totalRows:"",currentPage:1,perPage:25,pageOptions:[5,10,15],sortBy:"",sortDesc:!1,sortDirection:"asc",filter:null,filterOn:[],filterDeliv:"",infoModal:{id:"info-modal",title:"",content:""}}},filters:{moment:function(t){return l()(t).format("D MMMM YYYY")}},computed:{sortOptions:function(){return this.fields.filter((function(t){return t.sortable})).map((function(t){return{text:t.label,value:t.key}}))}},methods:{getTransactionList:function(t){var e=this;i["d"].custLoader(!0);var a=(t.currentPage-1)*t.perPage;1===t.currentPage&&(a=0);var n=t.filter;null===n&&(n="");var r=t.dateFilter;return null!==r&&""!==r&&void 0!==r||(r=""),s["a"].order.getList(a,t.perPage,1,r).then((function(t){var a=t.data;if(t.status){e.totalRows=a._meta.total;var n=a.data;return n||[]}a.data.errors.length>0&&e.$refs.dTable.setErrors(a.data.errors)})).finally((function(){i["d"].custLoader(!1)}))},onDateFilter:function(){var t={apiUrl:"",currentPage:1,filter:null,perPage:10,sortBy:"",sortDesc:!1,dateFilter:this.filterDeliv};this.getTransactionList(t)},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},noteOrder:function(t,e,a){this.infoModal.title="Detail Catatan Pesanan",this.infoModal.content='<p>Catatan Pesanan: <span class="font-weight-bold">'+t.note_order+"</span></p>",this.$root.$emit("bv::show::modal",this.infoModal.id,a)},resetNoteOrder:function(){this.infoModal.title="",this.infoModal.content=""},accOrder:function(t){var e=this,a=confirm("Terima order dari "+t.customer+"?");a&&s["a"].order.accept(t.unique_order_item).then((function(t){t.status&&(i["d"].showSnackbar("success","Order telah diterima."),e.$refs.dTable.refresh())})).finally((function(){e.loading=!1}))},rejectOrder:function(t){var e=this,a=confirm("Tolak order dengan ID "+t.customer+"?");a&&s["a"].order.reject(t.unique_order_item).then((function(t){t.status&&(i["d"].showSnackbar("success","Order telah ditolak."),e.$refs.dTable.refresh())})).finally((function(){e.loading=!1}))},separatorNum:function(t){return"undefined"===typeof t||null===t||"null"===t?null:(t=parseFloat(t),t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."))}}},u=c,d=(a("43f5"),a("2877")),m=Object(d["a"])(u,n,r,!1,null,null,null);e["default"]=m.exports},bdc0:function(t,e,a){}}]);
//# sourceMappingURL=chunk-6de1d7af.0623e792.js.map