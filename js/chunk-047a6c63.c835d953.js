(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-047a6c63"],{"09ed":function(t,a,e){"use strict";e("61f9")},"3aa3":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("b-container",{attrs:{fluid:""}},[e("b-row",[e("b-col",{attrs:{md:"12",sm:"12"}},[e("iq-card",{scopedSlots:t._u([{key:"headerTitle",fn:function(){return[e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.addCategoryModal",modifiers:{addCategoryModal:!0}}],staticClass:"float-right mr-2",attrs:{variant:"success"}},[t._v("Tambah Kategori")]),e("b-modal",{attrs:{id:"addCategoryModal",centered:"",title:"Tambah data file","ok-title":"Tambah","cancel-title":"Batal"},on:{show:t.onAddShow,ok:t.onSubmit}},[e("b-container",[e("b-row",[e("b-col",{attrs:{md:"12"}},[e("b-form-group",{attrs:{"label-for":"categoryname",label:"Nama Category"}},[e("b-form-input",{attrs:{id:"categoryname",type:"text",placeholder:"-"},model:{value:t.category.name_category,callback:function(a){t.$set(t.category,"name_category",a)},expression:"category.name_category"}})],1)],1),e("b-col",{attrs:{md:"12"}},[e("b-form-group",{attrs:{"label-for":"categorytype",label:"Type"}},[e("multiselect",{attrs:{id:"categorytype",options:t.listType,"custom-label":t.idWithName,placeholder:"Pilih type category",label:"name_type","track-by":"name_type"},model:{value:t.category.master_type_id,callback:function(a){t.$set(t.category,"master_type_id",a)},expression:"category.master_type_id"}})],1)],1),e("b-col",{attrs:{md:"12"}},[e("b-form-group",{attrs:{"label-for":"categorystatus",label:"Status"}},[e("b-form-select",{attrs:{plain:"",options:t.status,id:"categorystatus"},model:{value:t.category.status,callback:function(a){t.$set(t.category,"status",a)},expression:"category.status"}})],1)],1)],1)],1)],1)]},proxy:!0},{key:"body",fn:function(){return[e("b-row",[e("div",{staticClass:"col-3"},[e("h5",[t._v("Daftar Tipe Menu")]),e("hr"),e("div",{staticClass:"nav flex-column nav-pills",attrs:{id:"v-pills-tab",role:"tablist","aria-orientation":"vertical"}},t._l(t.tabName,(function(a,o){return e("a",{key:o,staticClass:"nav-link",attrs:{id:"v-pills-type-tab"+a.id,"data-toggle":"pill",href:"#v-pills-type"+a.id,role:"tab","aria-controls":"v-pills-type"+a.id,"aria-selected":"true"},on:{click:function(e){return t.findCategory(a.name_type)}}},[t._v(t._s(a.name_type.toUpperCase()))])})),0)]),e("div",{staticClass:"col-9"},[e("h5",[t._v("Daftar Kategori")]),e("hr"),e("div",{staticClass:"tab-content",attrs:{id:"v-pills-tabContent"}},[t._l(t.tabName,(function(a,o){return e("div",{key:o,staticClass:"tab-pane fade",attrs:{id:"v-pills-type"+a.id,role:"tabpanel","aria-labelledby":"v-pills-type"+a.id}},[e("div",{staticClass:"table-responsive"},[e("b-table",{ref:"dTable",refInFor:!0,attrs:{striped:"",hover:"",responsive:"",items:t.tblCategory,fields:t.fieldsCategory},scopedSlots:t._u([{key:"cell(no)",fn:function(a){return[t._v(" "+t._s(a.index+1)+" ")]}},{key:"cell(category)",fn:function(a){return[t._v(" "+t._s(a.item.id)+" - "+t._s(a.item.category)+" ")]}},{key:"cell(actions)",fn:function(a){return[e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"editCategory",expression:"`editCategory`"}],staticClass:"mr-1",attrs:{size:"sm",variant:"primary"},on:{click:function(e){return t.sendInfo(a.item.id)}}},[e("div",{staticClass:"icon",attrs:{"data-icon":""}})]),e("b-button",{staticClass:"mr-1",attrs:{size:"sm",variant:"danger"},on:{click:function(e){return t.deleteCategory(a.item.id)}}},[e("div",{staticClass:"icon",attrs:{"data-icon":""}})])]}}],null,!0)}),e("b-col",{staticClass:"my-1",attrs:{sm:"12",md:"6"}},[e("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"fill",size:"sm"},model:{value:t.currentPage,callback:function(a){t.currentPage=a},expression:"currentPage"}})],1)],1)])})),e("b-modal",{attrs:{id:"editCategory",centered:"",title:"Ubah data category","ok-title":"Ubah","cancel-title":"Batal"},on:{ok:t.onEdit,show:t.onAddShow}},[e("b-container",[e("b-row",[e("b-col",{attrs:{md:"12"}},[e("b-form-group",{attrs:{"label-for":"categoryname",label:"Nama Tipe"}},[e("b-form-input",{attrs:{id:"categoryname",type:"text",placeholder:"-"},model:{value:t.category.name_category,callback:function(a){t.$set(t.category,"name_category",a)},expression:"category.name_category"}})],1)],1),e("b-col",{attrs:{md:"12"}},[e("b-form-group",{attrs:{"label-for":"categorytype",label:"Type"}},[e("multiselect",{attrs:{id:"categorytype",options:t.listType.map((function(t){return t.id})),"custom-label":function(a){return t.listType.find((function(t){return t.id==a})).name_type},placeholder:"Pilih type category",label:"name_type","track-by":"id"},model:{value:t.category.master_type_id,callback:function(a){t.$set(t.category,"master_type_id",a)},expression:"category.master_type_id"}})],1)],1),e("b-col",{attrs:{md:"12"}},[e("b-form-group",{attrs:{"label-for":"categorystatus",label:"Status"}},[e("b-form-select",{attrs:{plain:"",options:t.status,id:"categorystatus"},model:{value:t.category.status,callback:function(a){t.$set(t.category,"status",a)},expression:"category.status"}})],1)],1)],1)],1)],1)],2)])])]},proxy:!0}])})],1)],1)],1)},i=[],r=(e("d81d"),e("4de4"),e("d3b7"),e("fb6a"),e("99af"),e("bcae")),n=e("22dc"),s={name:"CategoryList",props:{},mounted:function(){r["d"].index(),this.totalRows=this.listCategory.index+1,this.getTypeListD()},data:function(){return{listCategory:[],listType:[],tblCategory:[],category:{name_category:"",master_type_id:"",status:""},fields:[{key:"no",label:"No.",sortable:!0,sortDirection:"asc"},{key:"name_category",label:"ID - Nama"},{key:"master_type_id",label:"ID - Type"},{key:"status",label:"Status",formatter:function(t,a,e){return t?"Aktif":"Tidak Aktif"},sortable:!0,sortByFormatted:!0,filterByFormatted:!0},{key:"actions",label:"Tindakan"}],fieldsCategory:[{key:"no",label:"No.",sortable:!0,sortDirection:"asc"},{key:"category",label:"ID - Nama Kategori"},{key:"actions",label:"Tindakan"}],status:[{value:1,text:"Aktif"},{value:0,text:"Tidak Aktif"}],tabName:[],totalRows:1,currentPage:1,perPage:20,pageOptions:[5,10,15],sortBy:"",sortDesc:!1,sortDirection:"asc",filter:null,filterOn:[],infoModal:{id:"info-modal",title:"",content:""},idSave:""}},computed:{sortOptions:function(){return this.fields.filter((function(t){return t.sortable})).map((function(t){return{text:t.label,value:t.key}}))}},methods:{onSubmit:function(){this.addCategory()},onEdit:function(){this.editCategory()},onAddShow:function(){var t=this;n["a"].type.getAllType(0,100).then((function(a){t.listType=a.data.result})).finally((function(){t.loading=!1}))},findCategory:function(t){var a=this;window.scrollTo(0,0),n["a"].cat.getCategorybyType(t).then((function(t){200===t.status&&(a.tblCategory=t.data.result)})).finally((function(){a.loading=!1}))},sendInfo:function(t){var a=this;n["a"].type.getAllType().then((function(e){n["a"].cat.getDetailCategory(t).then((function(e){e.status&&(a.category={name_category:e.data.result.name_category,status:e.data.result.status,master_type_id:e.data.result.id},a.idSave=t)})).finally((function(){a.loading=!1}))})).finally((function(){a.loading=!1}))},info:function(t,a,e){this.infoModal.title="Row index: ".concat(a),this.infoModal.content=JSON.stringify(t,null,2),this.$root.$emit("bv::show::modal",this.infoModal.id,e)},resetInfoModal:function(){this.infoModal.title="",this.infoModal.content=""},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},getCategoryList:function(){var t=this;n["a"].cat.getAllCategory().then((function(a){t.listCategory=a.data.result;var e=a.data.result,o=e.filter((function(t,a){return!e.slice(0,a).some((function(a){return a.id===t.master_type_id}))}));t.getTypeList(o)})).finally((function(){t.loading=!1}))},getTypeListD:function(){var t=this;n["a"].type.getAllType(0,100).then((function(a){for(var e=a.data.result,o=0;o<e.length;o++)t.tabName=e})).finally((function(){t.loading=!1}))},getTypeList:function(t){var a=this;n["a"].type.getAllType().then((function(e){for(var o=e.data.result,i=0;i<o.length;i++)t[i].master_type_id===o[i].id&&(a.tabName=o)})).finally((function(){a.loading=!1}))},idWithName:function(t){var a=t.id,e=t.name_type;return"".concat(a," — ").concat(e)},addCategory:function(){var t=this;this.category.master_type_id=this.category.master_type_id.id,n["a"].cat.addCategory(this.category).then((function(a){a.status&&(r["d"].showSnackbar("success","Category telah berhasil ditambah."),t.$refs.dTable.refresh(),t.category={})})).finally((function(){t.loading=!1}))},editCategory:function(){var t=this;n["a"].cat.editCategory(this.idSave,this.category).then((function(t){t.status&&r["d"].showSnackbar("success","Category telah berhasil diubah.")})).finally((function(){t.loading=!1}))},deleteCategory:function(t){var a=this,e=confirm("Apakah anda ingin menghapus data ini?");e&&n["a"].cat.deleteCategory(t).then((function(t){t.status?r["d"].showSnackbar("success","Category telah berhasil dihapus."):t.data.errors.length>0&&(a.$refs.form.setErrors(t.data.errors),alert("gagal"))})).finally((function(){a.loading=!1}))}}},l=s,c=(e("09ed"),e("2877")),d=Object(c["a"])(l,o,i,!1,null,null,null);a["default"]=d.exports},"61f9":function(t,a,e){}}]);
//# sourceMappingURL=chunk-047a6c63.c835d953.js.map