(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ea09ba44"],{b50d8:function(a,e,t){"use strict";t("b800")},b800:function(a,e,t){},cbde:function(a,e,t){"use strict";t.r(e);var s=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("b-container",{attrs:{fluid:""}},[t("b-row",[t("b-col",{attrs:{lg:"12"}},[t("iq-card",{attrs:{"body-class":"p-0"},scopedSlots:a._u([{key:"body",fn:function(){return[t("div",{staticClass:"iq-edit-list"},[t("tab-nav",{staticClass:"iq-edit-profile d-flex",attrs:{pills:!0}},[t("tab-nav-items",{staticClass:"col-md-4 p-0",attrs:{active:!0,href:"#userdata",title:"Data Pengguna"}}),10==a.getUserState.user.role?t("tab-nav-items",{staticClass:"col-md-4 p-0",attrs:{href:"#adminsetting",title:"Admin Setting"}}):a._e(),t("tab-nav-items",{staticClass:"col-md-4 p-0",attrs:{href:"#notif",title:"Notifikasi"}})],1)],1)]},proxy:!0}])})],1),t("b-col",{attrs:{lg:"12"}},[t("div",{staticClass:"iq-edit-list-data"},[t("tab-content",{attrs:{id:"pills-tabContent-2"}},[t("tab-content-item",{attrs:{active:!0,id:"userdata"}},[t("iq-card",{scopedSlots:a._u([{key:"headerTitle",fn:function(){return[t("h4",{staticClass:"card-title"},[a._v("Data Pengguna")])]},proxy:!0},{key:"body",fn:function(){return[t("ValidationObserver",{scopedSlots:a._u([{key:"default",fn:function(e){var s=e.handleSubmit;return[t("form",{on:{submit:function(e){return e.preventDefault(),s(a.onSubmit)}}},[t("b-row",{attrs:{"align-v":"center"}},[t("b-form-group",{staticClass:"col-md-6",attrs:{label:"Username","label-for":"username"}},[t("ValidationProvider",{attrs:{name:"Username",rules:"required"},scopedSlots:a._u([{key:"default",fn:function(e){var s=e.errors;return[t("b-form-input",{class:s.length>0?" is-invalid":"",attrs:{type:"text",placeholder:"-"},model:{value:a.user.username,callback:function(e){a.$set(a.user,"username",e)},expression:"user.username"}}),t("div",{staticClass:"invalid-feedback"},[t("span",[a._v(a._s(s[0]))])])]}}],null,!0)})],1),t("b-form-group",{staticClass:"col-md-6",attrs:{label:"Alamat Email","label-for":"email"}},[t("ValidationProvider",{attrs:{name:"Alamat Email",rules:"required"},scopedSlots:a._u([{key:"default",fn:function(e){var s=e.errors;return[t("b-form-input",{class:s.length>0?" is-invalid":"",attrs:{type:"email",placeholder:"-"},model:{value:a.user.email,callback:function(e){a.$set(a.user,"email",e)},expression:"user.email"}}),t("div",{staticClass:"invalid-feedback"},[t("span",[a._v(a._s(s[0]))])])]}}],null,!0)})],1)],1),t("b-button",{staticClass:"mr-2",attrs:{type:"submit",variant:"primary"}},[a._v("Ubah Data")]),t("b-button",{staticClass:"iq-bg-danger",attrs:{type:"reset",variant:"none"}},[a._v("Batal")])],1)]}}])})]},proxy:!0}])}),t("iq-card",{scopedSlots:a._u([{key:"headerTitle",fn:function(){return[t("h4",{staticClass:"card-title"},[a._v("Pengaturan Rekening Bank")])]},proxy:!0},{key:"body",fn:function(){return[t("b-row",[t("b-col",{attrs:{md:"6"}},[t("b-form-group",{attrs:{"label-for":"selBank",label:"Pilih Rekening Bank :"}},[t("b-form-select",{staticClass:"mb-3",attrs:{id:"selBank"},model:{value:a.rek.selecBank,callback:function(e){a.$set(a.rek,"selecBank",e)},expression:"rek.selecBank"}},[t("b-form-select-option",{attrs:{value:0}},[a._v("Pilih Salah Satu")]),t("b-form-select-option",{attrs:{value:"BCA"}},[a._v("BANK BCA")]),t("b-form-select-option",{attrs:{value:"MANDIRI"}},[a._v("BANK MANDIRI")]),t("b-form-select-option",{attrs:{value:"BRI"}},[a._v("BANK BRI")]),t("b-form-select-option",{attrs:{value:"MAYBANK"}},[a._v("BANK MAYBANK")]),t("b-form-select-option",{attrs:{value:"PERMATA"}},[a._v("BANK PERMATA")])],1)],1)],1),t("b-col",{attrs:{md:"6"}},[t("b-form-group",{attrs:{id:"input-group-2",label:"Nama Sesuai Rekening(a/n) :","label-for":"inputNamaRekening"}},[t("b-form-input",{attrs:{id:"inputNamaRekening",placeholder:"-"},model:{value:a.rek.anRekening,callback:function(e){a.$set(a.rek,"anRekening",e)},expression:"rek.anRekening"}})],1)],1),t("b-col",{attrs:{md:"6"}},[t("b-form-group",{attrs:{id:"input-group-2",label:"Masukan Nomor Rekening :","label-for":"inputRekening"}},[t("b-form-input",{attrs:{id:"inputRekening",placeholder:"-"},model:{value:a.rek.noRekening,callback:function(e){a.$set(a.rek,"noRekening",e)},expression:"rek.noRekening"}})],1)],1)],1),t("div",{staticClass:"text-right"},[t("b-button",{ref:"submitForm",staticClass:"mr-2",attrs:{variant:"primary"},on:{click:a.submitRek}},[a._v("Simpan Rekening")]),t("b-button",{staticClass:"iq-bg-danger",attrs:{type:"reset",variant:"none"}},[a._v("Batal")])],1)]},proxy:!0}])}),t("iq-card",{scopedSlots:a._u([{key:"headerTitle",fn:function(){return[t("h4",{staticClass:"card-title"},[a._v("Pengaturan Password")])]},proxy:!0},{key:"body",fn:function(){return[t("ValidationObserver",{scopedSlots:a._u([{key:"default",fn:function(e){var s=e.handleSubmit;return[t("b-form",{on:{submit:function(e){return e.preventDefault(),s(a.changePassword)}}},[t("b-row",[t("b-form-group",{staticClass:"col-md-8",attrs:{label:"Kata Sandi Lama:","label-for":"oldpass"}},[t("ValidationProvider",{attrs:{name:"Kata Sandi"},scopedSlots:a._u([{key:"default",fn:function(e){var s=e.errors;return[t("b-form-input",{class:s.length>0?" is-invalid":"",attrs:{type:"password",placeholder:"Password lama"},model:{value:a.pass.old_password,callback:function(e){a.$set(a.pass,"old_password",e)},expression:"pass.old_password"}}),t("div",{staticClass:"invalid-feedback"},[t("span",[a._v(a._s(s[0]))])])]}}],null,!0)})],1),t("b-form-group",{staticClass:"col-md-6",attrs:{label:"Kata Sandi Baru:","label-for":"pass"}},[t("ValidationProvider",{attrs:{name:"Kata Sandi",rules:"confirmed:repeat_password"},scopedSlots:a._u([{key:"default",fn:function(e){var s=e.errors;return[t("b-form-input",{class:s.length>0?" is-invalid":"",attrs:{type:"password",placeholder:"Password"},model:{value:a.pass.new_password,callback:function(e){a.$set(a.pass,"new_password",e)},expression:"pass.new_password"}}),t("div",{staticClass:"invalid-feedback"},[t("span",[a._v(a._s(s[0]))])])]}}],null,!0)})],1),t("b-form-group",{staticClass:"col-md-6",attrs:{label:"Ulangi Kata Sandi:","label-for":"rpass"}},[t("ValidationProvider",{attrs:{vid:"repeat_password",name:"Ulangi Kata Sandi",rules:"required"},scopedSlots:a._u([{key:"default",fn:function(e){var s=e.errors;return[t("b-form-input",{class:s.length>0?" is-invalid":"",attrs:{type:"password",placeholder:"-"},model:{value:a.pass.retype_password,callback:function(e){a.$set(a.pass,"retype_password",e)},expression:"pass.retype_password"}}),t("div",{staticClass:"invalid-feedback"},[t("span",[a._v(a._s(s[0]))])])]}}],null,!0)})],1)],1),t("div",{staticClass:"text-right"},[t("b-button",{staticClass:"mr-2",attrs:{type:"submit",variant:"primary"}},[a._v("Ubah Password")]),t("b-button",{staticClass:"iq-bg-danger",attrs:{type:"reset",variant:"none"}},[a._v("Batal")])],1)],1)]}}])})]},proxy:!0}])}),t("iq-card",{scopedSlots:a._u([{key:"headerTitle",fn:function(){return[t("h4",{staticClass:"card-title"},[a._v("Pengaturan Lanjutan")])]},proxy:!0},{key:"body",fn:function(){return[t("b-alert",{attrs:{show:!0,variant:"danger"}},[t("div",{staticClass:"iq-alert-text"},[t("b-form-checkbox",{staticClass:"d-inline float-right",attrs:{id:"checkVP",switch:""},on:{change:a.toggleDel},model:{value:a.checkDel,callback:function(e){a.checkDel=e},expression:"checkDel"}}),t("h5",{staticClass:"text-danger font-weight-bold"},[a._v("Matikan Akun Anda")]),a._v(" Fitur ini digunakan apabila anda tidak setuju atau ingin menghapus data akun yang anda/kami buat di aplikasi ini. ")],1)])]},proxy:!0}])})],1),t("tab-content-item",{attrs:{id:"notif"}},[t("iq-card",{scopedSlots:a._u([{key:"body",fn:function(){return[t("b-row",{attrs:{"align-v":"center"}},[t("b-form-group",{staticClass:"col-md-4",attrs:{label:"Pilih penerimaan notifikasi anda:"}},[t("b-form-checkbox",{attrs:{name:"check-email"},model:{value:a.check.selEmail,callback:function(e){a.$set(a.check,"selEmail",e)},expression:"check.selEmail"}},[a._v("Email ")]),1==a.check.selEmail?t("b-form-input",{staticClass:"mt-2",attrs:{type:"email",placeholder:"Alamat email..."},model:{value:a.check.emailVal,callback:function(e){a.$set(a.check,"emailVal",e)},expression:"check.emailVal"}}):a._e()],1),t("b-form-group",{staticClass:"col-md-4",attrs:{label:":"}},[t("b-form-checkbox",{attrs:{name:"check-wa"},model:{value:a.check.selWA,callback:function(e){a.$set(a.check,"selWA",e)},expression:"check.selWA"}},[a._v("WhatsApp ")]),1==a.check.selWA?t("b-form-input",{staticClass:"mt-2",attrs:{type:"text",placeholder:"Nomor whatsapp anda..."},model:{value:a.check.waVal,callback:function(e){a.$set(a.check,"waVal",e)},expression:"check.waVal"}}):a._e()],1),t("b-form-group",{staticClass:"col-md-4",attrs:{label:":"}},[t("b-form-checkbox",{attrs:{name:"check-wa"},model:{value:a.check.selSMS,callback:function(e){a.$set(a.check,"selSMS",e)},expression:"check.selSMS"}},[a._v("SMS ")]),1==a.check.selSMS?t("b-form-input",{staticClass:"mt-2",attrs:{type:"text",placeholder:"Nomor handphone anda..."},model:{value:a.check.waSMS,callback:function(e){a.$set(a.check,"waSMS",e)},expression:"check.waSMS"}}):a._e()],1)],1),t("b-button",{staticClass:"mr-2",attrs:{type:"submit",variant:"primary"}},[a._v("Simpan")]),t("b-button",{staticClass:"iq-bg-danger",attrs:{type:"reset",variant:"none"}},[a._v("Batal")])]},proxy:!0}])})],1),t("tab-content-item",{attrs:{id:"adminsetting"}},[t("iq-card",{scopedSlots:a._u([{key:"body",fn:function(){return[t("b-row",{attrs:{"align-v":"center"}},[t("b-form-group",{staticClass:"col-md-1",attrs:{label:"Admin Fee","label-for":"adminfee"}},[t("b-input-group",{attrs:{size:"lg",append:"%"}},[t("b-form-input",{staticClass:"tarvol1",attrs:{type:"text",placeholder:"-"},model:{value:a.adminfee,callback:function(e){a.adminfee=e},expression:"adminfee"}})],1)],1)],1),t("b-button",{staticClass:"mr-2",attrs:{type:"button",variant:"primary"},on:{click:a.adminFeeAct}},[a._v("Simpan")]),t("b-button",{staticClass:"iq-bg-danger",attrs:{type:"reset",variant:"none"}},[a._v("Batal")])]},proxy:!0}])})],1)],1)],1)])],1),t("b-modal",{attrs:{id:"confirmPass",title:"Konfirmasi Password"},on:{ok:a.submitPass}},[t("b-form-row",[t("b-col",[t("b-form-input",{attrs:{type:"password",placeholder:"Masukan password anda"},model:{value:a.confirmPassTxt,callback:function(e){a.confirmPassTxt=e},expression:"confirmPassTxt"}})],1)],1)],1)],1)},r=[],n=t("5530"),i=(t("fb6a"),t("d3b7"),t("25f0"),t("bcae")),o=t("2f62"),l=t("dde5"),c=t("358c"),d={editProfile:function(a){return l["a"].post("".concat(c["a"].urlAPIPHP,"/Account/change_uname_email"),a)},getUserProfile:function(a){return l["a"].get("/user/".concat(a))},getAllUser:function(){return l["a"].get("/user")},editAdminFee:function(a){return l["a"].post("".concat(c["a"].urlAPIPHP,"/Master/Config/admin_fee"),a)},editPass:function(a){return l["a"].post("".concat(c["a"].urlAPIPHP,"/Account/change_password"),a)},updaterek:function(a){return l["a"].post("".concat(c["a"].urlAPIPHP,"/Vendor/Profile/updaterek/vendor"),a)},getrek:function(){return l["a"].get("".concat(c["a"].urlAPIPHP,"/Vendor/Profile/inforek"))}},u=t("3452"),p=t.n(u),f={name:"ProfileEdit",mounted:function(){i["d"].index(),this.getDataProfile()},computed:Object(n["a"])({},Object(o["c"])({getUserState:"authModule/getUserData"})),data:function(){return{user:{id:"",username:"",email:""},pass:{old_password:"",new_password:"",retype_password:""},check:{selEmail:!1,selWA:!1,selSMS:!1,emailVal:"",waVal:"",smsVal:""},checkDel:!1,adminfee:"",currentPassword:"",selected:[],allSelected:!1,indeterminate:!1,rek:{selecBank:0,noRekening:"",anRekening:""},confirmPassTxt:""}},methods:Object(n["a"])(Object(n["a"])({},Object(o["b"])({storeUserData:"authModule/authUserAction"})),{},{onSubmit:function(){this.updateProfile()},previewImage:function(a){var e=this,t=a.target;if(t.files&&t.files[0]){var s=new FileReader;s.onload=function(a){e.user.profile_image=a.target.result},s.readAsDataURL(t.files[0])}},toggleAll:function(a){this.selected=a?this.notifApp.slice():[]},aesEncrypt:function(a){var e=p.a.SHA256(a).toString(p.a.enc.Hex);return e},changePassword:function(){var a=this;this.pass.new_password=this.aesEncrypt(this.pass.new_password),this.pass.old_password=this.aesEncrypt(this.pass.old_password),this.pass.retype_password=this.aesEncrypt(this.pass.retype_password);var e=confirm("Ubah password?");e&&(i["d"].custLoader(!0),d.editPass(this.pass).then((function(a){var e=a.data;a.status?"SUCCESS"===e.message?i["d"].showSnackbar("success","Password berhasil di ubah."):i["d"].showSnackbar("error",e.data):i["d"].showSnackbar("error","Maaf, terjadi kesalahan pada sistem.")})).finally((function(){a.pass.new_password="",a.pass.old_password="",a.pass.retype_password="",i["d"].custLoader(!1)})).catch((function(){i["d"].showSnackbar("error","Maaf, terjadi kesalahan pada sistem.")})))},getDataProfile:function(){var a=this;d.getUserProfile(this.getUserState.user.id).then((function(e){a.user={id:e.data.result.id,username:e.data.result.username,email:e.data.result.email}})).finally((function(){a.loading=!1})),d.getrek().then((function(e){var t=e.data;a.rek.anRekening=t.data.atas_nama,a.rek.noRekening=t.data.rek,a.rek.selecBank=t.data.bank,null===t.data.bank&&(a.rek.selecBank=0)})).finally((function(){a.loading=!1}))},adminFeeAct:function(){i["d"].custLoader(!0);var a=new FormData;a.append("loyalty",parseInt(this.adminfee)),d.editAdminFee(a).then((function(a){var e=a.data;a.status&&(i["d"].showSnackbar("success",e.message),i["d"].custLoader(!1))}))},updateProfile:function(){var a=this;i["d"].custLoader(!0);var e=JSON.parse(localStorage.getItem("user"));d.editProfile(this.user).then((function(t){if(t.status){var s={auth:e.auth,authType:"passport",verified:e.verified,user:{address:e.user.address,coordinates:e.user.coordinates,id:e.user.id,role:e.user.role,email:a.user.email,username:a.user.username},isLoggedin:!0};a.storeUserData(s),localStorage.setItem("user",JSON.stringify(s)),i["d"].showSnackbar("success","User has been added successfully.")}else t.data.errors.length>0&&a.$refs.form.setErrors(t.data.errors)})).catch((function(){i["d"].showSnackbar("error","Maaf, terjadi kesalahan.")})).finally((function(){window.location.reload()}))},toggleDel:function(){!0===this.checkDel&&alert("Development...")},showPassword:function(){this.$root.$emit("bv::show::modal","confirmPass","#submitForm")},submitRek:function(){var a=this;i["d"].custLoader(!0);var e=new FormData;e.append("selectBank",this.rek.selecBank),e.append("noRekening",this.rek.noRekening),e.append("anRekening",this.rek.anRekening),d.updaterek(e).then((function(e){200===e.status&&(a.getDataProfile(),i["d"].showSnackbar("success","Berhasil mengubah rekening..."))})).finally((function(){i["d"].custLoader(!1)}))},submitPass:function(){"12345"!==this.confirmPassTxt?alert("Password salah..."):alert("Sukses, masih dalam pengembangan")}})},m=f,b=(t("b50d8"),t("2877")),k=Object(b["a"])(m,s,r,!1,null,null,null);e["default"]=k.exports}}]);
//# sourceMappingURL=chunk-ea09ba44.42555f73.js.map