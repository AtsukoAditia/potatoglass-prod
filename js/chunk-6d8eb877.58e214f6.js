(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d8eb877"],{"0788":function(a,t,e){},"84ec":function(a,t,e){"use strict";e.r(t);var n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("b-container",{attrs:{fluid:""}},[e("b-row",[e("b-col",{attrs:{md:"12",sm:"12"}},[e("iq-card",{scopedSlots:a._u([{key:"headerTitle",fn:function(){return[e("h4",{staticClass:"card-title"},[a._v("List Template")])]},proxy:!0},{key:"body",fn:function(){return[e("b-row",{staticClass:"mb-2"},[e("b-col",{attrs:{md:"12"}},[e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.addTemplateModal",modifiers:{addTemplateModal:!0}}],staticClass:"float-right mr-2",attrs:{variant:"success"}},[a._v("Add Template")]),e("b-modal",{ref:"modalTemplate",attrs:{id:"addTemplateModal",size:"xl",title:"Tambah data template","ok-title":"Tambah","cancel-title":"Batal"},on:{ok:a.onSubmit,hidden:a.resetInfoModal}},[e("b-container",[e("b-row",[e("b-col",{attrs:{md:"4"}},[e("b-form-group",{attrs:{"label-for":"standar_baku",label:"Grup Standar Baku RAB"}},[e("multiselect",{attrs:{label:"category",options:a.standar_baku.map((function(a){return a.id})),"custom-label":function(t){return a.standar_baku.find((function(a){return a.id==t})).category},id:"standar_baku"},model:{value:a.sendData.standar_baku,callback:function(t){a.$set(a.sendData,"standar_baku",t)},expression:"sendData.standar_baku"}})],1)],1),e("b-col",{attrs:{md:"4"}},[e("b-form-group",{attrs:{"label-for":"grup_pekerjaan_utama",label:"Nama Grup Pekerjaan Utama"}},[e("multiselect",{attrs:{label:"category",options:a.grup_pekerjaan_utama.map((function(a){return a.id})),"custom-label":function(t){return a.grup_pekerjaan_utama.find((function(a){return a.id==t})).category},id:"grup_pekerjaan_utama"},model:{value:a.sendData.grup_pekerjaan_utama,callback:function(t){a.$set(a.sendData,"grup_pekerjaan_utama",t)},expression:"sendData.grup_pekerjaan_utama"}})],1)],1),e("b-col",{attrs:{md:"4"}},[e("b-form-group",{attrs:{"label-for":"grup_pelaksana",label:"Grup Pelaksanaan"}},[e("multiselect",{attrs:{label:"category",options:a.grup_pelaksana.map((function(a){return a.id})),"custom-label":function(t){return a.grup_pelaksana.find((function(a){return a.id==t})).category},id:"grup_pelaksana"},model:{value:a.sendData.grup_pelaksana,callback:function(t){a.$set(a.sendData,"grup_pelaksana",t)},expression:"sendData.grup_pelaksana"}})],1)],1),e("b-col",{attrs:{md:"6"}},[e("b-form-group",{attrs:{"label-for":"kategori_urut",label:"Kategori Urut"}},[e("b-form-input",{attrs:{id:"kategori_urut",type:"text",placeholder:"-"},model:{value:a.sendData.kategori_urut,callback:function(t){a.$set(a.sendData,"kategori_urut",t)},expression:"sendData.kategori_urut"}})],1)],1),e("b-col",{attrs:{md:"6"}},[e("b-form-group",{attrs:{"label-for":"kategori_zoning",label:"Kategori Zoning"}},[e("b-form-input",{attrs:{id:"kategori_zoning",type:"text",placeholder:"-"},model:{value:a.sendData.kategori_zoning,callback:function(t){a.$set(a.sendData,"kategori_zoning",t)},expression:"sendData.kategori_zoning"}})],1)],1),e("b-col",{attrs:{md:"6"}},[e("b-form-group",{attrs:{"label-for":"kategori_bahan",label:"Kategori Bahan"}},[e("b-form-input",{attrs:{id:"kategori_bahan",type:"text",placeholder:"-"},model:{value:a.sendData.kategori_bahan,callback:function(t){a.$set(a.sendData,"kategori_bahan",t)},expression:"sendData.kategori_bahan"}})],1)],1),e("b-col",{attrs:{md:"6"}},[e("b-form-group",{attrs:{"label-for":"jenis_pekerjaan_parent",label:"Jenis Pekerjaan"}},[e("multiselect",{attrs:{label:"category",options:a.jenis_pekerjaan_parent.map((function(a){return a.id})),"custom-label":function(t){return a.jenis_pekerjaan_parent.find((function(a){return a.id==t})).category},id:"jenis_pekerjaan_parent"},model:{value:a.sendData.jenis_pekerjaan_parent,callback:function(t){a.$set(a.sendData,"jenis_pekerjaan_parent",t)},expression:"sendData.jenis_pekerjaan_parent"}})],1)],1)],1),e("b-row",[e("b-col",{attrs:{md:"12"}},[e("div",{staticClass:"table-responsive"},[e("table",{},[e("thead",[e("tr",[e("th",{staticClass:"text-center"},[a._v("Jenis")]),e("th",{staticClass:"text-center"},[a._v("Komponen")]),e("th",{staticClass:"text-center"},[a._v("Koefisien Dasar Analisis")]),e("th",{staticClass:"text-center"},[a._v("Satuan")]),e("th",{staticClass:"text-center"},[a._v("Harga")]),e("th",{staticClass:"text-center"},[a._v("Rekomendasi Harga")]),e("th",{staticClass:"text-center"},[a._v("-")])])]),e("tbody",a._l(a.sendData.items,(function(t,n){return e("tr",{key:n},[e("td",[e("b-form-select",{staticClass:"jenis_komponen",attrs:{size:"sm",options:a.selJenKom},model:{value:t.jenis_komponen,callback:function(e){a.$set(t,"jenis_komponen",e)},expression:"inp.jenis_komponen"}})],1),e("td",[e("b-form-input",{staticClass:"komponen_name",attrs:{size:"sm",type:"text",placeholder:"-"},model:{value:t.komponen_name,callback:function(e){a.$set(t,"komponen_name",e)},expression:"inp.komponen_name"}})],1),e("td",[e("b-form-input",{staticClass:"koefisien_dasar",attrs:{size:"sm",type:"text",placeholder:"-"},model:{value:t.koefisien_dasar,callback:function(e){a.$set(t,"koefisien_dasar",e)},expression:"inp.koefisien_dasar"}})],1),e("td",[e("b-form-input",{staticClass:"satuan",attrs:{size:"sm",type:"text",placeholder:"-"},model:{value:t.satuan,callback:function(e){a.$set(t,"satuan",e)},expression:"inp.satuan"}})],1),e("td",[e("b-form-input",{staticClass:"harga",attrs:{size:"sm",type:"text",placeholder:"-"},model:{value:t.harga,callback:function(e){a.$set(t,"harga",e)},expression:"inp.harga"}})],1),e("td",[e("b-form-input",{staticClass:"rekomendasi_harga",attrs:{size:"sm",type:"text",placeholder:"-"},model:{value:t.rekomendasi_harga,callback:function(e){a.$set(t,"rekomendasi_harga",e)},expression:"inp.rekomendasi_harga"}})],1),e("td",[n>0?e("b-button",{attrs:{variant:"danger"},on:{click:function(t){return a.removeMater(n)}}},[e("i",{staticClass:"ri-delete-bin-2-fill pr-0"})]):a._e()],1),e("input",{ref:"load",refInFor:!0,attrs:{type:"hidden",value:"true"}})])})),0)])]),e("b-button",{attrs:{variant:"primary"},on:{click:a.addMater}},[a._v("+")])],1)],1)],1)],1)],1)],1),e("b-table",{ref:"dTable",attrs:{"show-empty":"",stacked:"md",items:a.getDataList,fields:a.fields,"current-page":a.currentPage,"per-page":a.perPage,filter:a.filter,filterIncludedFields:a.filterOn,"sort-by":a.sortBy,"sort-desc":a.sortDesc,"sort-direction":a.sortDirection},on:{"update:sortBy":function(t){a.sortBy=t},"update:sort-by":function(t){a.sortBy=t},"update:sortDesc":function(t){a.sortDesc=t},"update:sort-desc":function(t){a.sortDesc=t},filtered:a.onFiltered},scopedSlots:a._u([{key:"cell(no)",fn:function(t){return[a._v(" "+a._s(t.index+1)+" ")]}},{key:"cell(actions)",fn:function(t){return[e("div",{staticClass:"d-flex"},[e("b-button",{staticClass:"mr-1",attrs:{size:"sm",variant:"primary"},on:{click:function(e){return a.viewData(t.item.id)}}},[e("div",{staticClass:"icon",attrs:{"data-icon":""}})]),e("b-button",{staticClass:"mr-1",attrs:{size:"sm",variant:"info"},on:{click:t.toggleDetails}},[e("div",{staticClass:"icon",attrs:{"data-icon":""}})]),e("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(e){return a.deleteTemplate(t.item.id)}}},[e("div",{staticClass:"icon",attrs:{"data-icon":""}})])],1)]}},{key:"row-details",fn:function(t){return[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table-striped w-100"},[e("thead",[e("tr",[e("th",[a._v("Nama Material")]),e("th",[a._v("Jenis Komponen")]),e("th",[a._v("Harga")]),e("th",[a._v("Rekomendasi Harga")]),e("th",[a._v("Satuan")]),e("th",[a._v("Koefisien Dasar")])])]),e("tbody",a._l(t.item.list_komponen,(function(t,n){return e("tr",{key:n},[e("th",[a._v(a._s(t.komponen_name))]),e("th",[a._v(a._s(t.jenis_komponen))]),e("th",[a._v("Rp "+a._s(t.harga))]),e("th",[a._v("Rp "+a._s(t.rekomendasi_harga))]),e("th",[a._v(a._s(t.satuan))]),e("th",[a._v(a._s(t.koefisien_dasar)+"%")])])})),0)])])]}}])}),e("b-col",{staticClass:"my-1",attrs:{sm:"12",md:"6"}},[e("b-pagination",{staticClass:"my-0",attrs:{"total-rows":a.totalRows,"per-page":a.perPage,align:"fill",size:"sm"},model:{value:a.currentPage,callback:function(t){a.currentPage=t},expression:"currentPage"}})],1)]},proxy:!0}])})],1)],1)],1)},s=[],r=(e("d81d"),e("4de4"),e("d3b7"),e("99af"),e("a434"),e("bcae")),i=e("bc3a"),o=e.n(i),l=e("22dc"),u=e("358c"),d={name:"TemplateStdList",props:{},mounted:function(){r["d"].index(),this.totalRows=this.listTemplate.index+1,this.getDynamicData("standar_baku","standard-type"),this.getDynamicData("grup_pekerjaan_utama","grup-pekerjaan-utama"),this.getDynamicData("grup_pelaksana","grup-pelaksana"),this.getDynamicData("jenis_pekerjaan_parent","jenis-pekerjaan-rap")},data:function(){return{loading:!1,listTemplate:[],type:{name_type:"",status:""},fields:[{key:"no",label:"No.",sortable:!0,sortDirection:"asc"},{key:"standar_baku_teks",label:"Standar Baku"},{key:"grup_pekerjaan_utama_teks",label:"Grup Pekerjaan Utama"},{key:"grup_pelaksana_teks",label:"Grup Pelaksanaan"},{key:"kategori_urut",label:"Kategori Urut"},{key:"kategori_zoning",label:"Kategori Zoning"},{key:"kategori_bahan",label:"Kategori Bahan"},{key:"jenis_pekerjaan_parent",label:"Jenis Pekerjaan"},{key:"actions",label:"Tindakan"}],status:[{value:1,text:"Aktif"},{value:0,text:"Tidak Aktif"}],totalRows:1,currentPage:1,perPage:20,pageOptions:[5,10,15],sortBy:"",sortDesc:!1,sortDirection:"asc",filter:null,filterOn:[],infoModal:{id:"info-modal",title:"",content:""},idSave:"",sendData:{id:"",standar_baku:"",grup_pekerjaan_utama:"",grup_pelaksana:"",kategori_urut:"",kategori_zoning:"",kategori_bahan:"",jenis_pekerjaan_parent:"",items:[{jenis_komponen:"",komponen_name:"",koefisien_dasar:0,satuan:0,harga:0,rekomendasi_harga:0}]},standar_baku:[],grup_pekerjaan_utama:[],grup_pelaksana:[],jenis_pekerjaan_parent:[],selJenKom:[{value:1,text:"Material"},{value:2,text:"Matr. Penunjang"},{value:3,text:"Jasa"}],idTemplate:""}},computed:{sortOptions:function(){return this.fields.filter((function(a){return a.sortable})).map((function(a){return{text:a.label,value:a.key}}))}},methods:{onSubmit:function(){var a=this;""!==this.idTemplate&&(this.sendData.id=this.idTemplate),delete this.sendData.grup_pekerjaan_utama_teks,delete this.sendData.grup_pelaksana_teks,delete this.sendData.jenis_pekerjaan_parent_teks,delete this.sendData.standar_baku_teks,o.a.post("".concat(u["a"].urlAPIPHP,"/save_template"),JSON.stringify(this.sendData),{headers:{}}).then((function(t){a.loading=!0,r["d"].showSnackbar("success","Template telah berhasil ditambah."),a.getTemplateList()})).finally((function(){a.loading=!1})).catch((function(){r["d"].showSnackbar("error","Maaf, terjadi kesalahan pada sistem.")}))},onEdit:function(){this.editTemplate()},info:function(a,t,e){this.infoModal.title="Row index: ".concat(t),this.infoModal.content=JSON.stringify(a,null,2),this.$root.$emit("bv::show::modal",this.infoModal.id,e)},resetInfoModal:function(){this.sendData={standar_baku:"",grup_pekerjaan_utama:"",grup_pelaksana:"",kategori_urut:"",kategori_zoning:"",kategori_bahan:"",jenis_pekerjaan_parent:"",items:[{jenis_komponen:"",komponen_name:"",koefisien_dasar:0,satuan:0,harga:0,rekomendasi_harga:0}]}},onFiltered:function(a){this.totalRows=a.length,this.currentPage=1},getDataList:function(a){var t=this,e=(a.currentPage-1)*a.perPage;1===a.currentPage&&(e=0);var n=a.filter;return null===n&&(n=""),o.a.get("".concat(u["a"].urlAPIPHP,"/get_all_template?skip=").concat(e,"&limit=").concat(a.perPage)).then((function(a){if(a.status){t.totalRows=a.data.recordsTotal;var e=a.data.result;return e||[]}a.data.errors.length>0&&t.$refs.form.setErrors(a.data.errors)})).finally((function(){t.loading=!1}))},getDynamicData:function(a,t){var e=this;l["a"].cat.getCategorybyType(t).then((function(t){200===t.status&&(e[a]=t.data.result)})).finally((function(){e.loading=!1}))},addTemplate:function(){var a=this;l["a"].material.getTemplateList().then((function(t){t.status&&(r["d"].showSnackbar("success","Tipe telah berhasil ditambah."),a.getTemplateList())})).finally((function(){a.loading=!1}))},viewData:function(a){var t=this;this.idTemplate=a;var e=new FormData;e.append("pekerjaan[]",a),o.a.post("".concat(u["a"].urlAPIPHP,"/get_all_template"),e).then((function(a){a.status&&(t.sendData=a.data.result[0],t.sendData.items=a.data.result[0].list_komponen,t.$refs["modalTemplate"].show())})).finally((function(){t.loading=!1}))},deleteTemplate:function(a){var t=this,e=new FormData;e.append("id",a);var n=confirm("Aksi ini akan menghapus semua data turunannya. Tetap hapus?");n&&o.a.post("".concat(u["a"].urlAPIPHP,"/delete_template"),e).then((function(a){a.status&&(r["d"].showSnackbar("success","Template telah berhasil dihapus."),t.getTemplateList())})).finally((function(){t.loading=!1}))},addMater:function(){this.sendData["items"].push({jenis_komponen:"",komponen_name:"",koefisien_dasar:0,satuan:"",harga:0,rekomendasi_harga:0})},removeMater:function(a){this.sendData.items.splice(a,1)}}},c=d,p=(e("a2fd"),e("2877")),m=Object(p["a"])(c,n,s,!1,null,null,null);t["default"]=m.exports},a2fd:function(a,t,e){"use strict";e("0788")}}]);
//# sourceMappingURL=chunk-6d8eb877.58e214f6.js.map