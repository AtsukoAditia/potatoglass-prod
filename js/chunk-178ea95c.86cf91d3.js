(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-178ea95c"],{"0cb5":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{attrs:{md:"3",sm:"6"}},[a("iq-card",{scopedSlots:t._u([{key:"body",fn:function(){return[a("div",{staticClass:"d-flex align-items-center justify-content-between"},[a("h6",{staticClass:"font-weight-bold"},[t._v("Total Transaksi")]),a("span",{staticClass:"iq-icon"},[a("i",{staticClass:"ri-information-fill"})])]),a("div",{staticClass:"iq-customer-box d-flex align-items-center justify-content-between mt-3"},[a("div",{staticClass:"d-flex align-items-center"},[a("div",{staticClass:"rounded-circle iq-card-icon iq-bg-primary mr-2"},[a("i",{staticClass:"ri-inbox-fill"})]),a("h3",[t._v("Rp "+t._s(t.separatorNum(t.infoTotal.transaksi)))])]),a("div",{staticClass:"iq-map text-primary font-size-32"},[a("i",{staticClass:"ri-bar-chart-grouped-line"})])])]},proxy:!0}])})],1),a("b-col",{attrs:{md:"3",sm:"6"}},[a("iq-card",{scopedSlots:t._u([{key:"body",fn:function(){return[a("div",{staticClass:"d-flex align-items-center justify-content-between"},[a("h6",{staticClass:"font-weight-bold"},[t._v("Total Fee 2%")]),a("span",{staticClass:"iq-icon"},[a("i",{staticClass:"ri-information-fill"})])]),a("div",{staticClass:"iq-customer-box d-flex align-items-center justify-content-between mt-3"},[a("div",{staticClass:"d-flex align-items-center"},[a("div",{staticClass:"rounded-circle iq-card-icon iq-bg-danger mr-2"},[a("i",{staticClass:"ri-radar-line"})]),a("h3",[t._v("Rp "+t._s(t.separatorNum(t.infoTotal.fee)))])]),a("div",{staticClass:"iq-map text-danger font-size-32"},[a("i",{staticClass:"ri-bar-chart-grouped-line"})])])]},proxy:!0}])})],1),a("b-col",{attrs:{md:"3",sm:"6"}},[a("iq-card",{scopedSlots:t._u([{key:"body",fn:function(){return[a("div",{staticClass:"d-flex align-items-center justify-content-between"},[a("h6",{staticClass:"font-weight-bold"},[t._v("Transaksi Berhasil")]),a("span",{staticClass:"iq-icon"},[a("i",{staticClass:"ri-information-fill"})])]),a("div",{staticClass:"iq-customer-box d-flex align-items-center justify-content-between mt-3"},[a("div",{staticClass:"d-flex align-items-center"},[a("div",{staticClass:"rounded-circle iq-card-icon iq-bg-warning mr-2"},[a("i",{staticClass:"ri-price-tag-3-line"})]),a("h3",[t._v(t._s(t.separatorNum(t.infoTotal.success)))])]),a("div",{staticClass:"iq-map text-warning font-size-32"},[a("i",{staticClass:"ri-bar-chart-grouped-line"})])])]},proxy:!0}])})],1),a("b-col",{attrs:{md:"3",sm:"6"}},[a("iq-card",{scopedSlots:t._u([{key:"body",fn:function(){return[a("div",{staticClass:"d-flex align-items-center justify-content-between"},[a("h6",{staticClass:"font-weight-bold"},[t._v("Transaksi Proses")]),a("span",{staticClass:"iq-icon"},[a("i",{staticClass:"ri-information-fill"})])]),a("div",{staticClass:"iq-customer-box d-flex align-items-center justify-content-between mt-3"},[a("div",{staticClass:"d-flex align-items-center"},[a("div",{staticClass:"rounded-circle iq-card-icon iq-bg-info mr-2"},[a("i",{staticClass:"ri-refund-line"})]),a("h3",[t._v(t._s(t.separatorNum(t.infoTotal.process)))])]),a("div",{staticClass:"iq-map text-info font-size-32"},[a("i",{staticClass:"ri-bar-chart-grouped-line"})])])]},proxy:!0}])})],1)],1),a("b-row",[a("b-col",{attrs:{md:"12",sm:"12"}},[a("iq-card",{scopedSlots:t._u([{key:"headerTitle",fn:function(){},proxy:!0},{key:"body",fn:function(){return[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("label",{attrs:{for:"searchInput"}},[t._v("Pencarian")]),a("b-form-input",{attrs:{id:"searchInput",type:"search",size:"md",placeholder:"Ketik disini untuk mencari..."},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1),a("b-col",{staticClass:"my-1 float-right",attrs:{md:"6"}})],1),a("br"),a("b-table",{ref:"dTable",attrs:{items:t.getTransactionList,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter},on:{filtered:t.onFiltered},scopedSlots:t._u([{key:"cell(no)",fn:function(e){return[a("span",{attrs:{"v-for":e}},[t._v(" "+t._s((t.currentPage-1)*t.perPage+(e.index+1))+" ")])]}},{key:"cell(vendor_name)",fn:function(e){return[t._v(" "+t._s(e.item.vendor_name)+" ")]}},{key:"cell(total_price)",fn:function(e){return[0!=e.item.payment.total_amount?a("div",[a("span",{staticClass:"d-block"},[t._v("Rp "+t._s(t.separatorNum(parseFloat(e.item.total_price-e.item.payment.total_amount))))]),a("small",[a("s",[t._v("Rp "+t._s(t.separatorNum(e.item.total_price)))])])]):a("div",[t._v(" Rp "+t._s(t.separatorNum(e.item.total_price))+" ")])]}},{key:"cell(fee)",fn:function(e){return[t._v(" Rp "+t._s(t.separatorNum(e.item.total_price/100*2))+" ")]}},{key:"cell(list)",fn:function(e){return[t._v(" "+t._s(t.separatorNum(e.item.list.length))+" ")]}},{key:"cell(material)",fn:function(e){return[1==e.item.list.length?a("span",[t._v(" "+t._s(e.item.list[0].material_name)+" ")]):2==e.item.list.length?a("span",[t._v(" "+t._s(e.item.list[0].material_name)+", "+t._s(e.item.list[1].material_name)+" ")]):e.item.list.length>2?a("span",[t._v(" "+t._s(e.item.list[0].material_name)+", "+t._s(e.item.list[1].material_name)+", ... ")]):t._e()]}},{key:"cell(created_at)",fn:function(e){return[t._v(" "+t._s(t._f("moment")(e.item.created_at))+" ")]}},{key:"cell(note)",fn:function(e){return[a("b-button",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:function(a){return t.noteOrder(e.item,e.index,a.target)}}},[t._v(" Lihat ")])]}},{key:"cell(status_order)",fn:function(e){return[1==e.item.status_order?a("b-badge",{attrs:{variant:"warning"}},[t._v("Pesanan Masuk")]):t._e(),2==e.item.status_order?a("b-badge",{attrs:{variant:"info"}},[t._v("DP Telah Diterima "),a("b",[t._v(t._s(e.item.payment.percentace)+"%")])]):t._e(),3==e.item.status_order?a("b-badge",{attrs:{variant:"primary"}},[t._v("Pesanan diterima Vendor")]):t._e(),4==e.item.status_order?a("b-badge",{attrs:{variant:"warning"}},[t._v("Pesanan dalam Pengiriman")]):t._e(),9==e.item.status_order?a("b-badge",{attrs:{variant:"info"}},[t._v("Pesanan Diterima")]):t._e(),10==e.item.status_order?a("b-badge",{attrs:{variant:"success"}},[t._v("Pesanan Berhasil")]):t._e(),11==e.item.status_order?a("b-badge",{attrs:{variant:"danger"}},[t._v("Pesanan Ditolak Vendor")]):t._e(),12==e.item.status_order?a("b-badge",{attrs:{variant:"danger"}},[t._v("Pesanan Dibatalkan User")]):t._e()]}},{key:"cell(actions)",fn:function(t){return[a("router-link",{attrs:{to:{name:"booking.detail",params:{id:t.item.order_id}}}},[a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.top",value:"Lihat detail pesanan",expression:"'Lihat detail pesanan'",modifiers:{top:!0}}],staticClass:"mr-1",attrs:{size:"sm",variant:"info"}},[a("div",{staticClass:"icon",attrs:{"data-icon":"ÓÅÅ"}})])],1)]}}])}),a("b-col",{staticClass:"my-1",attrs:{sm:"12",md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"fill",size:"sm"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)]},proxy:!0}])})],1)],1),a("b-modal",{attrs:{id:t.infoModal.id,title:t.infoModal.title,"ok-only":""},on:{hide:t.resetNoteOrder}},[a("div",{staticClass:"text-dark",domProps:{innerHTML:t._s(t.infoModal.content)}})])],1)},s=[],n=(a("d81d"),a("4de4"),a("d3b7"),a("ac1f"),a("5319"),a("25f0"),a("bcae")),r=a("22dc"),o=a("c1df"),l=a.n(o),c={name:"TransactionList",props:{toMaterialAdd:{type:Object,default:function(){return{name:"material.addmaterial"}}}},mounted:function(){n["d"].index()},data:function(){return{fields:[{key:"no",label:"No.",sortable:!0,sortDirection:"asc"},{key:"vendor_name",label:"Penjual"},{key:"customer_name",label:"Pembeli"},{key:"created_at",label:"Pesanan Dibuat"},{key:"total_price",label:"Total Transaksi"},{key:"fee",label:"Fee 2%"},{key:"status_order",label:"Status"},{key:"actions",label:"Aksi"}],totalRows:"",currentPage:1,perPage:20,pageOptions:[5,10,15],sortBy:"",sortDesc:!1,sortDirection:"asc",filter:null,filterOn:[],filterDeliv:"",infoModal:{id:"info-modal",title:"",content:""},infoTotal:{transaksi:"",fee:"",success:"",process:""}}},filters:{moment:function(t){return l()(t).format("D MMMM YYYY")}},computed:{sortOptions:function(){return this.fields.filter((function(t){return t.sortable})).map((function(t){return{text:t.label,value:t.key}}))}},methods:{getTransactionList:function(t){var e=this;n["d"].custLoader(!0);var a=(t.currentPage-1)*t.perPage;1===t.currentPage&&(a=0);var i=t.filter;null===i&&(i="");var s=t.dateFilter;null!==s&&""!==s&&void 0!==s||(s="");var o=0,l=0,c=0;return r["a"].transaction.getTransaction(a,t.perPage,i,s).then((function(t){var a=t.data;if(t.status){e.totalRows=t.data._metadata.total;for(var i=0;i<a.result.length;i++){o+=parseInt(a.result[i].total_price);var s=a.result[i].status_order;1===s||2===s||3===s||4===s?c+=1:9!==s&&10!==s||(l+=1)}e.infoTotal.transaksi=o,e.infoTotal.success=l,e.infoTotal.process=c,e.infoTotal.fee=o/100*2;var n=t.data.result;return n||[]}t.data.errors.length>0&&e.$refs.dTable.setErrors(t.data.errors)})).finally((function(){n["d"].custLoader(!1)}))},onDateFilter:function(){var t={apiUrl:"",currentPage:1,filter:null,perPage:10,sortBy:"",sortDesc:!1,dateFilter:this.filterDeliv};this.getTransactionList(t)},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},noteOrder:function(t,e,a){this.infoModal.title="Detail Catatan Pesanan",this.infoModal.content='<p>Catatan Pesanan: <span class="font-weight-bold">'+t.note_order+"</span></p>",this.$root.$emit("bv::show::modal",this.infoModal.id,a)},resetNoteOrder:function(){this.infoModal.title="",this.infoModal.content=""},accOrder:function(t){var e=this,a=confirm("Terima order dari "+t.customer_name+"?");a&&r["a"].order.accept(t.unique_order_item).then((function(t){t.status&&(n["d"].showSnackbar("success","Order telah diterima."),e.$refs.dTable.refresh())})).finally((function(){e.loading=!1}))},rejectOrder:function(t){var e=this,a=confirm("Tolak order dengan ID "+t.customer_name+"?");a&&r["a"].order.reject(t.unique_order_item).then((function(t){t.status&&(n["d"].showSnackbar("success","Order telah ditolak."),e.$refs.dTable.refresh())})).finally((function(){e.loading=!1}))},separatorNum:function(t){return"undefined"===typeof t||null===t||"null"===t?null:(t=parseFloat(t),t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."))}}},d=c,u=(a("23e2c"),a("2877")),f=Object(u["a"])(d,i,s,!1,null,null,null);e["default"]=f.exports},"23e2c":function(t,e,a){"use strict";a("a799")},a799:function(t,e,a){}}]);
//# sourceMappingURL=chunk-178ea95c.86cf91d3.js.map