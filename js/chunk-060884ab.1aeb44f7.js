(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-060884ab"],{"15f5":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{attrs:{md:"12",sm:"12"}},[a("iq-card",{scopedSlots:t._u([{key:"body",fn:function(){return[a("b-row",[a("b-col",{attrs:{md:"6"}},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-borderless table-sm"},[a("tr",[a("td",[t._v("Order ID")]),a("td",[t._v(": #"+t._s(t.detail.kode_proyek))])]),a("tr",[a("td",[t._v("Status Transaksi")]),a("td",[t._v(": "),1==t.detail.status?a("b-badge",{attrs:{variant:"warning"}},[t._v("Pesanan Masuk")]):t._e(),2==t.detail.status?a("b-badge",{attrs:{variant:"primary"}},[t._v("DP Telah Diterima")]):t._e(),3==t.detail.status?a("b-badge",{attrs:{variant:"primary"}},[t._v("Pesanan diterima Vendor")]):t._e(),4==t.detail.status?a("b-badge",{attrs:{variant:"warning"}},[t._v("Pesanan dalam Pengiriman")]):t._e(),9==t.detail.status?a("b-badge",{attrs:{variant:"info"}},[t._v("Pesanan Diterima")]):t._e(),10==t.detail.status?a("b-badge",{attrs:{variant:"success"}},[t._v("Pesanan Berhasil")]):t._e(),11==t.detail.status?a("b-badge",{attrs:{variant:"danger"}},[t._v("Pesanan Ditolak Vendor")]):t._e(),12==t.detail.status?a("b-badge",{attrs:{variant:"danger"}},[t._v("Pesanan Dibatalkan User")]):t._e()],1)])])])]),a("b-col",{attrs:{md:"6"}},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-borderless table-sm"},[a("tr",[a("td",[t._v("Total Jumlah Barang")]),a("td",[t._v(": "+t._s(t.separatorNum(t.detail.jumlah_item)))])]),a("tr",[a("td",[t._v("Total Transaksi")]),a("td",[t._v(": "),0!=t.detail.dp_amount?a("span",[a("span",{staticClass:"font-weight-bold"},[t._v("Rp "+t._s(t.separatorNum(parseFloat(t.detail.total_transaction-t.detail.dp_amount)))+" ")]),a("small",[a("s",[t._v("Rp "+t._s(t.separatorNum(t.detail.total_transaction)))])])]):a("span",[t._v(" Rp "+t._s(t.separatorNum(t.detail.total_transaction))+" ")])])])])])])],1),a("b-table",{ref:"dTable",attrs:{items:t.getDetail,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage},on:{filtered:t.onFiltered},scopedSlots:t._u([{key:"cell(no)",fn:function(e){return[a("span",{attrs:{"v-for":e}},[t._v(" "+t._s((t.currentPage-1)*t.perPage+(e.index+1))+" ")])]}},{key:"cell(jumlah_item)",fn:function(e){return[t._v(" "+t._s(t.separatorNum(e.item.jumlah_item))+" ")]}},{key:"cell(delivery_time)",fn:function(e){return[t._v(" "+t._s(t._f("moment")(e.item.delivery_time))+" ")]}},{key:"cell(sub_total)",fn:function(e){return[t._v(" Rp "+t._s(t.separatorNum(e.item.sub_total))+" ")]}},{key:"cell(met_pengiriman)",fn:function(e){return[t._v(" Oleh Ekspedisi "+t._s(e.item.delivery_type)+" "),a("b-button",{attrs:{size:"sm",variant:"outline-info"},on:{click:function(a){return t.seeDeliv(e.item,e.index,a.target)}}},[t._v("Detail")])]}},{key:"cell(biaya_pengiriman)",fn:function(e){return[t._v(" Rp 15.000 ")]}}])},[a("template",{slot:"bottom-row"},[a("td",{attrs:{colspan:"4"}}),a("td",[a("b",[t._v("Total Biaya Pengiriman")])]),a("td",[t._v("Rp 15.000")])])],2),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"fill",size:"sm"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),a("b-col",{staticClass:"text-right",attrs:{md:"6"}},[a("b-button",{staticClass:"mr-2 w-50",attrs:{variant:"success"},on:{click:t.delivToContractor}},[t._v("Kirim Pesanan")])],1)],1)]},proxy:!0}])})],1)],1),a("b-modal",{attrs:{id:t.infoModal.id,title:t.infoModal.title,"ok-only":""},on:{hide:t.resetseeDeliv}},[a("div",{staticClass:"text-dark",domProps:{innerHTML:t._s(t.infoModal.content)}})])],1)},r=[],i=(a("d81d"),a("4de4"),a("a9e3"),a("d3b7"),a("ac1f"),a("5319"),a("25f0"),a("bcae")),s=a("b46c"),l=a("c1df"),o=a.n(l),d={components:{},name:"BookingDelivery",props:{},mounted:function(){i["d"].index()},data:function(){return{fields:[{key:"no",label:"No.",sortable:!0},{key:"material_name",label:"Nama Material"},{key:"delivery_time",label:"Waktu Pengiriman",sortable:!0,sortDirection:"asc"},{key:"jumlah_item",label:"Qty"},{key:"met_pengiriman",label:"Metode Pengiriman"},{key:"biaya_pengiriman",label:"Biaya"}],detail:{kode_proyek:"",customer_name:"",buyer_name:"",buyer_phone:"",customer_address:"",jumlah_item:"",total_transaction:"",status:"",dp_percent:"",dp_amount:""},totalRows:"",currentPage:1,perPage:10,pageOptions:[5,10,15],sortBy:"",sortDesc:!1,sortDirection:"asc",filter:null,filterOn:[],filterDeliv:"",deliv:[{price:0}],infoModal:{id:"info-modal",title:"",content:""},ids:"",listDeliv:[]}},filters:{moment:function(t){return o()(t).format("D MMMM YYYY")}},computed:{sortOptions:function(){return this.fields.filter((function(t){return t.sortable})).map((function(t){return{text:t.label,value:t.key}}))},total:function(){return this.deliv.reduce((function(t,e){return t+Number(e.price)}),0)}},methods:{getDetail:function(t){var e=this,a=(t.currentPage-1)*t.perPage;1===t.currentPage&&(a=0);var n,r=t.filter;null===r&&(r="");var i=0,l=0;return s["a"].order.getDetail(a,t.perPage,this.$route.params.id).then((function(t){if(t.status){for(e.detail.customer_name=t.data.result[0].customer_name,n=0;n<t.data.result[0].list.length;n++)i+=parseInt(t.data.result[0].list[n].jumlah_item),l+=parseInt(t.data.result[0].list[n].sub_total);e.detail.jumlah_item=i,e.detail.total_transaction=l,e.detail.status=t.data.result[0].status_order,e.detail.dp_percent=t.data.result[0].payment.percentace,e.detail.dp_amount=t.data.result[0].payment.total_amount,e.ids=t.data.result[0].list[0].unique_order_item,e.totalRows=t.data._metadata.total;var a=t.data.result[0].list;return e.listDeliv=a,a||[]}t.data.errors.length>0&&e.$refs.dTable.setErrors(t.data.errors)})).finally((function(){e.loading=!1}))},addTotal:function(t){this.deliv.push({price:0})},seeDeliv:function(t,e,a){this.infoModal.title="Detail Tipe Pengiriman",this.infoModal.content='<p>Kendaraan / Alat : <span class="font-weight-bold"> Truk Ukuran xxxx </span></p><p>Unit : <span class="font-weight-bold"> 2 Truk Bak </span></p><p>Volume Total : <span class="font-weight-bold"> 30x10x5 M </span></p>',this.$root.$emit("bv::show::modal",this.infoModal.id,a)},resetseeDeliv:function(){this.infoModal.title="",this.infoModal.content=""},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},rejectOrder:function(){var t=this,e=confirm("Tolak order dengan ini?");e&&s["a"].order.reject(this.$route.params.id).then((function(e){e.status&&(i["d"].showSnackbar("success","Order telah ditolak."),t.$router.push({name:"booking.all"}))})).finally((function(){t.loading=!1}))},accOrder:function(){var t=this,e=confirm("Terima order ini?");e&&s["a"].order.accept(this.$route.params.id).then((function(e){e.status&&(i["d"].showSnackbar("success","Silahkan melakukan setting pengiriman."),t.$refs.dTable.refresh())})).finally((function(){t.loading=!1}))},delivToContractor:function(){var t=this,e=[];for(var a in this.listDeliv){var n=this.listDeliv[a];e.push(n.unique_order_item)}var r=confirm("Kirim pesanan ini?");r&&s["a"].order.delivery({unique:e}).then((function(e){e.status&&(i["d"].showSnackbar("success","Pesanan sedang dikirim."),t.listDeliv=[],t.$refs.dTable.refresh())})).finally((function(){t.loading=!1}))},separatorNum:function(t){return"undefined"===typeof t||null===t||"null"===t?null:(t=parseFloat(t),t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."))}}},u=d,c=(a("2f00"),a("2877")),m=Object(c["a"])(u,n,r,!1,null,null,null);e["default"]=m.exports},"2f00":function(t,e,a){"use strict";a("f5f6")},f5f6:function(t,e,a){}}]);
//# sourceMappingURL=chunk-060884ab.1aeb44f7.js.map