(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07abbbd6"],{"1c81":function(t,e,a){},6094:function(t,e,a){"use strict";a("1c81")},fd65:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{attrs:{md:"12",sm:"12"}},[a("iq-card",{scopedSlots:t._u([{key:"body",fn:function(){return[a("b-row",[a("b-button",{attrs:{variant:"info",id:"btnPrint"},on:{click:t.printAct}},[t._v("Print")]),a("b-col",{attrs:{md:"6"}},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-borderless table-sm"},[a("tr",[a("td",[t._v("Invoice ID")]),a("td",[t._v(": "),a("b",[t._v("#"+t._s(t.detail.invoice_id))])])]),a("tr",[a("td",[t._v("Nama Material")]),a("td",[t._v(": "),a("a",{attrs:{href:"#"}},[t._v(t._s(t.detail.nama_material))])])])])])]),a("b-col",{attrs:{md:"6"}},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-borderless table-sm"},[a("tr",[a("td",[t._v("Periode VP")]),a("td",[t._v(": "+t._s(t._f("momentNoY")(t.detail.vp.start))+" - "+t._s(t._f("momentNoY")(t.detail.vp.end)))])]),a("tr",[a("td",[t._v("Total Qty Barang")]),a("td",[t._v(": "+t._s(t.separatorNum(t.detail.jumlah_item)))])]),a("tr",[a("td",[t._v("Total Transaksi")]),a("td",[t._v(": "),0!=t.detail.dp_amount?a("span",[a("span",{staticClass:"font-weight-bold"},[t._v("Rp "+t._s(t.separatorNum(parseFloat(t.detail.total_transaction-t.detail.dp_amount)))+" ")]),a("small",[a("s",[t._v("Rp "+t._s(t.separatorNum(t.detail.total_transaction)))])])]):a("span",[t._v(" Rp "+t._s(t.separatorNum(t.detail.total_transaction))+" ")])])])])])])],1),a("b-table",{ref:"dTable",attrs:{items:t.getDetailOrder,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage},on:{filtered:t.onFiltered},scopedSlots:t._u([{key:"cell(no)",fn:function(e){return[a("span",{attrs:{"v-for":e}},[t._v(" "+t._s((t.currentPage-1)*t.perPage+(e.index+1))+" ")])]}},{key:"cell(delivery_time)",fn:function(e){return[t._v(" "+t._s(t._f("moment")(e.item.delivery_time))+" ")]}},{key:"cell(order_id)",fn:function(e){return[a("router-link",{attrs:{to:"/booking/"+e.item.order_id}},[t._v(" "+t._s(e.item.order_id)+" ")])]}},{key:"cell(trx_time)",fn:function(e){return[t._v(" "+t._s(t._f("moment")(e.item.trx_time))+" ")]}},{key:"cell(fee)",fn:function(e){return[t._v(" Rp "+t._s(t.separatorNum(e.item.total/100*2))+" ")]}},{key:"head(fee)",fn:function(){return[a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Fee admin dikenakan untuk pemotongan dana"}},[t._v("Fee 2% "),a("i",{staticClass:"fas fa-info-circle"})])]},proxy:!0},{key:"cell(total_price)",fn:function(e){return[t._v(" Rp "+t._s(t.separatorNum(e.item.total_price))+" ")]}},{key:"cell(price)",fn:function(e){return[t._v(" Rp "+t._s(t.separatorNum(e.item.price))+" ")]}},{key:"cell(total)",fn:function(e){return[t._v(" Rp "+t._s(t.separatorNum(e.item.total))+" ")]}},{key:"cell(qty)",fn:function(e){return[t._v(" "+t._s(t.separatorNum(e.item.qty))+" ")]}},{key:"cell(delivery_price)",fn:function(e){return[t._v(" Rp "+t._s(t.separatorNum(e.item.delivery_price))+" ")]}},{key:"cell(note)",fn:function(e){return[a("b-button",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:function(a){return t.noteOrder(e.item,e.index,a.target)}}},[t._v(" Lihat ")])]}}])},[a("template",{slot:"bottom-row"},[a("td",{attrs:{colspan:"2"}}),a("td",{staticClass:"font-weight-bold"},[t._v("Total Transaksi")]),a("td",{staticClass:"font-weight-bold"},[t._v(t._s(t.separatorNum(t.detail.jumlah_item)))]),a("td"),a("td",{staticClass:"font-weight-bold"},[t._v("Rp "+t._s(t.separatorNum(t.detail.total_transaction)))]),a("td",{staticClass:"font-weight-bold"},[t._v("Rp "+t._s(t.separatorNum(t.detail.total_dicount)))]),a("td",{attrs:{colspan:"2"}})])],2),a("b-row",[a("b-col",{attrs:{md:"4"}},[a("b-form-group",{attrs:{id:"txtNotes",label:"Catatan :","label-for":"txtNotes"}},[a("b-form-textarea",{attrs:{id:"txtNotes",placeholder:"-",rows:"3","max-rows":"6"},model:{value:t.notes,callback:function(e){t.notes=e},expression:"notes"}})],1)],1),a("b-col",{attrs:{md:"4"}}),a("b-col",{attrs:{md:"4"}})],1)]},proxy:!0}])})],1)],1),a("b-modal",{attrs:{id:t.infoModal.id,title:t.infoModal.title,"ok-only":""},on:{hide:t.resetNoteOrder}},[a("div",{staticClass:"text-dark",domProps:{innerHTML:t._s(t.infoModal.content)}})])],1)},n=[],o=a("5530"),i=(a("d81d"),a("4de4"),a("d3b7"),a("ac1f"),a("5319"),a("25f0"),a("a9e3"),a("bcae")),s=a("b46c"),l=a("c1df"),d=a.n(l),c=a("2f62"),u={name:"BookingTogether",props:{},mounted:function(){i["d"].index(),this.getDataLocal()},data:function(){return{fields:[{key:"no",label:"No.",sortable:!0},{key:"order_id",label:"ID Order"},{key:"nama_lengkap",label:"Nama Kontraktor"},{key:"qty",label:"Qty"},{key:"price",label:"Harga Satuan"},{key:"total_price",label:"Sub Total"},{key:"total",label:"Harga stl. Diskon"},{key:"fee",label:"Fee Admin"},{key:"delivery_time",label:"Tgl. Kirim",sortable:!0,sortDirection:"asc"},{key:"note",label:"Catatan"}],detail:{kode_proyek:"",nama_material:"",vendor_name:"",vendor_phone:"",vendor_address:"",jumlah_item:"",total_transaction:"",status:"",dp_percent:"",dp_amount:"",invoice_id:"",metode_pembayaran:"",total_dicount:"",notes:"",vp:"",harga_kirim:""},notes:"",totalRows:"",currentPage:1,perPage:10,pageOptions:[5,10,15],sortBy:"",sortDesc:!1,sortDirection:"asc",filter:null,filterOn:[],filterDeliv:"",infoModal:{id:"info-modal",title:"",content:""}}},filters:{moment:function(t){return d()(t).format("D MMM YYYY")},momentNoY:function(t){return d()(t).format("D MMM")}},computed:{sortOptions:function(){return this.fields.filter((function(t){return t.sortable})).map((function(t){return{text:t.label,value:t.key}}))}},methods:Object(o["a"])(Object(o["a"])({},Object(c["c"])({dataUser:"authModule/getUserData"})),{},{getDetail:function(t){},getDetailOrder:function(t){var e=this;i["d"].custLoader(!0);var a=0,r=0,n=0;return s["a"].order.getDetailJoin(this.$route.params.id).then((function(t){if(t.status){e.totalRows=20;for(var o=t.data.result,i=0;i<o.length;i++)a+=parseInt(o[i].qty),r+=parseInt(o[i].total_price),n+=parseInt(o[i].total);return e.detail.jumlah_item=a,e.detail.total_transaction=r,e.detail.total_dicount=n,e.detail.invoice_id=e.$route.params.id,o||[]}t.data.errors.length>0&&e.$refs.dTable.setErrors(t.data.errors)})).finally((function(){i["d"].custLoader(!1)}))},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},rejectOrder:function(){var t=this,e=confirm("Tolak order dengan ini?");e&&s["a"].order.reject(this.$route.params.id).then((function(e){e.status&&(i["d"].showSnackbar("success","Order telah ditolak."),t.$router.push({name:"booking.all"}))})).finally((function(){t.loading=!1}))},accOrder:function(){var t=this,e=confirm("Terima order ini?");e&&s["a"].order.accept(this.$route.params.id).then((function(e){e.status&&(i["d"].showSnackbar("success","Silahkan melakukan setting pengiriman."),t.$refs.dTable.refresh(),t.$router.push({name:"booking.delivery",id:t.$route.params.id}))})).finally((function(){t.loading=!1}))},orderToDeliv:function(){this.$router.push({name:"booking.delivery",id:this.$route.params.id})},separatorNum:function(t){return"undefined"===typeof t||null===t||"null"===t?null:(t=parseFloat(t),t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."))},countDiscount:function(t,e){var a=Number(t),r=Number(e)/100,n=a*r;return n},getDataLocal:function(){var t=this.dataUser();this.detail.vendor_name=t.user.username},printAct:function(){var t=document.getElementById("btnPrint"),e=document.getElementById("parentBread"),a=document.querySelector(".right-sidebar-toggle"),r=document.querySelector(".v-speed-dial");t.style.display="none",e.style.setProperty("display","none","important"),a.style.setProperty("display","none","important"),r.style.setProperty("display","none","important"),setTimeout((function(){window.print()}),500),setTimeout((function(){t.style.display="block",e.style.setProperty("display","flex","important"),a.style.setProperty("display","block","important"),r.style.setProperty("display","block","important")}),1e3)},noteOrder:function(t,e,a){this.infoModal.title="Detail Catatan Pesanan",this.infoModal.content='<p>Catatan Pesanan: <span class="font-weight-bold">'+t.note_order+"</span></p>",this.$root.$emit("bv::show::modal",this.infoModal.id,a)},resetNoteOrder:function(){this.infoModal.title="",this.infoModal.content=""}})},m=u,p=(a("6094"),a("2877")),f=Object(p["a"])(m,r,n,!1,null,null,null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-07abbbd6.b4ca7693.js.map